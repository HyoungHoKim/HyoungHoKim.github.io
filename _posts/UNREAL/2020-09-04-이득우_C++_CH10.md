---
layout: post
title:  "이득우 C++ Chapter010"
date:   2020-09-04 08:52:32 +0900
categories: [UNREAL]
---

이득우의 언리얼 C++ 게임 개발의 정석의 Chapter10 요약입니다.

### 캐릭터 소켓 설정
- 무기 애셋의 레퍼런스를 복사한 후 스켈레탈 메시 컴포넌트에 로딩하고 SetupAttachment 함수에 소켓 이름을 인자로 넘기면 소켓 위치를 기준으로 트랜스폼이 자동으로 설정된다.

### 무기 액터의 제작

### 아이템 상자의 제작
- 원본 애셋의 크기가 너무 작아 이를 크게 만들고 싶다면 LOD0섹션에 있는 빌드 스케일 옵션을 설정하면 된다. 이렇게 원본 데이터의 스케일을 변경하면 게임 로직에서 트랜스폼의 스케일 값을 신경 쓰지 않아도 되므로 효과적이다.
- 스태틱메시 설정을 완료하면 그 크기를 참고해 액터에 박스 콜리전 컴포넌트의 크기와 스태틱메시 컴포넌트의 에셋을 지정한다. 참고로 박스 콜리전 컴포넌트의 Extend 값은 전체 박스 영역 크기의 절반 값이다.
- 박스 컴포넌트에는 Overlap이벤트를 처리할 수 있게 OnComponentBeginOverlap이라는 이름의 델리게이트가 선언되있다.
- 매크로를 보면 OnComponentBeginOverlap 델리게이트는 멀티캐스트 다이내믹 델리게이트임을 확인할 수 있다. 유형과 인자를 모두 복사해 매크로 설정과 동일한 멤버 함수를 선언하고 이를 해당 델리게이트에 바인딩하면 Overlap 이벤트가 발생할 때마다 바인딩한 멤버 함수가 호출된다.

### 아이템의 습득
- 클래스 정보를 저장하는 변수를 선언할 때 UClass의 포인터를 사용할 수 있지만, 이를 사용하면 현재 프로젝트에 사용하는 모든 언리얼 오브젝트의 선언이 보이게 된다. 언리얼 엔진은 특정 클래스와 상속 받은 클래스들로 목록을 한정하도록 TSubClassof라는 키워드를 제공한다. 이를 사용하면 목록에서 아이템 상자와 이를 선언한 클래스 목록만 볼 수 있다.
- 상자 액터에 파티클 컴포넌트를 추가한 후, 해당 이펙트 애샛의 레퍼런스를 복사하고 파티클 컴포넌트의 템플릿으로 이를 지정한다. 멤버 함수를 하나 추가하고 파티클 컴포넌트 시스템에서 제공하는 OnSystemfinished 델리게이트에 이를 연결해 이펙트 재생이 종료되면 아이템 상자가 제거되도록 구성한다.
